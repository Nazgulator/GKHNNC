@using Microsoft.AspNet.Identity


<!-- Modal -->
<div class="modal fade" id="Download" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">



                <button id="X" type="button" class="close hide" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <h4>Загрузка данных, пожалуйста подождите...</h4>

            </div>
            <div class="modal-body">
                <div class="progress">

                    <div id="progressBar" class="progress-bar progress-bar-striped progress-bar-success progress-bar-animated" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                    <center>
                        <label id="nadpis">Загрузка данных...</label>
                    </center>
                </div>
            </div>
        </div>
    </div>
</div>







<Center>
    <h1><b>ФГУП "ЖКХ ННЦ"</b></h1>

    <p class="lead">
        Федеральное государственное унитарное предприятие <br /> «Жилищно коммунальное хозяйство Новосибирского научного центра»
    </p>


    @if (Request.IsAuthenticated)
    {
        if ((User.IsInRole("Пользователь") || User.IsInRole("Администратор")))
        {
            if (User.Identity.Name.Contains("БухгалтерПоТопливу") == false)
            {
                <div class="media col-md-4 col-md-offset-4">
                    <div class="media-left">
                        <img src="~/Ico/icons8-каска-50.png" class="media-object" style="width:50px">
                    </div>
                    <div class="media-body">
                        <h3 class="media-heading">Основные</h3>
                        <p>Выполненные работы и акты</p>
                    </div>
                </div>
                <p>
                    <button class="btn btn-success btn-lg" style="width:500Px" onclick="location.href='@Url.Action("IndexMain", "CompleteWorks")'">
                        <i class="glyphicon glyphicon-ok"></i> Выполненные работы &raquo;
                    </button>
                </p>
                <p>
                    <button class="btn btn-success btn-lg" style="width:500Px" onclick="location.href='@Url.Action("SozdanieAktov", "CompleteWorks")'">
                        <i class="glyphicon glyphicon-list-alt"></i> Формирование актов &raquo;
                    </button>
                </p>
            }
            if (User.IsInRole("Администратор") || User.Identity.Name.Contains("ИнженерОЭЖФ"))
            {



                <div class="media col-md-4 col-md-offset-4">
                    <div class="media-left">
                        <img src="~/Ico/icons8-производство-50.png" class="media-object" style="width:50px">
                    </div>
                    <div class="media-body">
                        <h3 class="media-heading">Адреса и виды работ</h3>
                        <p>Добавление новых адресов и видов работ</p>
                    </div>
                </div>

                <div class="table">
                    <div class="row">
                        <div class="col-md-12">
                            <p>
                                <button class="btn btn-success btn-lg" style="width:500Px" onclick="location.href='@Url.Action("Index", "Works")'">
                                    <i class="glyphicon glyphicon-wrench"></i> Виды работ &raquo;
                                </button>
                            </p>
                            <p>
                                <button class="btn btn-success btn-lg" style="width:500Px" onclick="location.href='@Url.Action("Index", "Adres")'">
                                    <i class="glyphicon glyphicon-home"></i> Адреса &raquo;
                                </button>
                            </p>
                            <p>
                                <button class="btn btn-success btn-lg" style="width:500Px" onclick="location.href='@Url.Action("TechPasport", "Home")'">
                                    <i class="glyphicon glyphicon-inbox"></i> Тех. паспорт дома &raquo;
                                </button>
                            </p>

                        </div>
                    </div>

                </div>

            }

            if (User.IsInRole("Администратор") )
            {



                <div class="media col-md-4 col-md-offset-4">
                    <div class="media-left">
                        <img src="~/Ico/icons8-solidworks-flow-simulation-50.png" class="media-object" style="width:50px">
                    </div>
                    <div class="media-body">
                        <h3 class="media-heading">Программа VODA</h3>
                        <p>Web версия программы.</p>
                    </div>
                </div>

                <div class="table">
                    <div class="row">
                        <div class="col-md-12">
                            <p>
                                <button class="btn btn-success btn-lg" style="width:500Px" onclick="location.href='@Url.Action("Index", "Adres")'">
                                    <i class="glyphicon glyphicon-home"></i> Адреса &raquo;
                                </button>
                            </p>
                            <p>
                                <button class="btn btn-success btn-lg" style="width:500Px" onclick="location.href='@Url.Action("Index", "Houses")'">
                                    <i class="glyphicon glyphicon-map-marker"></i> Детализация по домам &raquo;
                                </button>
                            </p>
                            <p>
                                <button class="btn btn-success btn-lg" style="width:500Px" onclick="location.href='@Url.Action("Index", "Arendators")'">
                                    <i class="glyphicon glyphicon-lock"></i> Арендаторы &raquo;
                                </button>
                            </p>
                            <p>
                                <button class="btn btn-success btn-lg" style="width:500Px" onclick="location.href='@Url.Action("Index", "TableServices")'">
                                    <i class="glyphicon glyphicon-th-large"></i> Таблица сервисов &raquo;
                                </button>
                            </p>
                            <p>
                                <button class="btn btn-success btn-lg" style="width:500Px" onclick="location.href='@Url.Action("VODAMain", "Home")'">
                                    <i class="glyphicon glyphicon-list-alt"></i> Программа "VODA" &raquo;
                                </button>
                            </p>

                        </div>
                    </div>

                </div>

            }


            if (User.Identity.Name.Contains("Экономист") || User.IsInRole("Администратор"))
            {

                <div class="media col-md-4 col-md-offset-4">
                    <div class="media-left">
                        <img src="~/Ico/icons8-лицензия-50.png" class="media-object" style="width:50px">
                    </div>
                    <div class="media-body">
                        <h3 class="media-heading">Услуги</h3>
                        <p>Загрузка выполненных услуг</p>
                    </div>
                </div>
                <div class="table">
                    <div class="row">
                        <div class="col-md-12">
                            <p>
                                <button class="btn btn-success btn-lg" style="width:500Px" onclick="location.href='@Url.Action("Index", "GEUs")'">
                                    <i class="glyphicon glyphicon-briefcase"></i> ЖЭУ &raquo;
                                </button>
                            </p>
                            <p>
                                <button class="btn btn-success btn-lg" style="width:500Px" onclick="location.href='@Url.Action("Index", "Uslugas")'">
                                    <i class="glyphicon glyphicon-star-empty"></i> Услуги &raquo;
                                </button>
                            </p>
                            <p>
                                <button class="btn btn-success btn-lg" style="width:500Px" onclick="location.href='@Url.Action("Index", "Periodichnosts")'">
                                    <i class="glyphicon glyphicon-repeat"></i> Периодичность &raquo;
                                </button>
                            </p>
                            <p>
                                <button class="btn btn-success btn-lg" style="width:500Px" onclick="location.href='@Url.Action("IndexPoDomam", "VipolnennieUslugis")'">
                                    <i class="glyphicon glyphicon-ok-sign"></i> Выполненные услуги по домам &raquo;
                                </button>
                            </p>

                            <p>
                                <button class="btn btn-success btn-lg" style="width:500Px" onclick="location.href='@Url.Action("Upload", "Home")'">
                                    <i class="glyphicon glyphicon-open"></i> Загрузка таблиц для актов &raquo;
                                </button>
                            </p>
                        </div>

                    </div>

                </div>

            }
            if (User.Identity.Name.Contains("Teplotehnik") || User.Identity.Name.Contains("BuhKv") || User.Identity.Name.Contains("Voda"))
            {
                <p>
                    <button class="btn btn-success btn-lg" style="width:500Px" onclick="location.href='@Url.Action("Index", "Houses")'">
                        <i class="glyphicon glyphicon-map-marker"></i> Детализация по домам &raquo;
                    </button>
                </p>
                <p>
                    <button class="btn btn-success btn-lg" style="width:500Px" onclick="location.href='@Url.Action("VODAMain", "Home")'">
                        <i class="glyphicon glyphicon-list-alt"></i> Расчет отопления и горячей воды  &raquo;
                    </button>
                </p>

            }
            if (User.Identity.Name.Contains("BuhKv"))
            {
                <p>
                    <button class="btn btn-success btn-lg" style="width:500Px" onclick="location.href='@Url.Action("Index", "Arendators")'">
                        <i class="glyphicon glyphicon-lock"></i> Арендаторы &raquo;
                    </button>
                </p>

            }
            if (User.Identity.Name.Contains("БухгалтерПоТопливу") || User.IsInRole("Администратор"))
            {
                <div class="media col-md-4 col-md-offset-4">
                    <div class="media-left">
                        <img src="~/Ico/icons8-погрузчик-50.png" class="media-object" style="width:50px">
                    </div>
                    <div class="media-body">
                        <h3 class="media-heading">Транспортный цех</h3>
                        <p>Автомобили, ездки, отчёты</p>
                    </div>
                </div>

                <p>
                    <button class="btn btn-success btn-lg" style="width:500Px" data-toggle="modal" data-target="#Download" onclick="location.href='@Url.Action("Index", "TypeAvtos")'">
                        <i class="glyphicon glyphicon-road"></i>  Типы автомобилей &raquo;
                    </button>
                </p>
                <p>
                    <button class="btn btn-success btn-lg" style="width:500Px" data-toggle="modal" data-target="#Download" onclick="location.href='@Url.Action("Index", "MarkaAvtomobils")'">
                        <i class="glyphicon glyphicon-screenshot"></i> Марки автомобилей &raquo;
                    </button>
                </p>
                <p>
                    <button class="btn btn-success btn-lg" style="width:500Px" data-toggle="modal" data-target="#Download" onclick="location.href='@Url.Action("Index", "Avtomobils")'">
                        <i class="glyphicon glyphicon-dashboard"></i> Список автомобилей &raquo;
                    </button>
                </p>
                <p>
                    <button class="btn btn-success btn-lg" style="width:500Px" data-toggle="modal" data-target="#Download" onclick="location.href='@Url.Action("Index", "Ezdkas")'">
                        <i class="glyphicon glyphicon-transfer"></i> Ездки &raquo;
                    </button>
                </p>

                <p>
                    <button class="btn btn-success btn-lg" style="width:500Px" data-toggle="modal" data-target="#Download" onclick="location.href='@Url.Action("SverkaAvtoscan", "Ezdkas")'">
                        <i class="glyphicon glyphicon-alert"></i> Сверка автоскан &raquo;
                    </button>
                </p>
                <p>
                    <button class="btn btn-success btn-lg" style="width:500Px" data-toggle="modal" data-target="#Download" onclick="location.href='@Url.Action("IndexMain", "Ezdkas")'">
                        <i class="glyphicon glyphicon-duplicate"></i> Отчёты по ездкам &raquo;
                    </button>
                </p>


            }
            if (User.IsInRole("Администратор"))

            {
                <div class="media col-md-4 col-md-offset-4">
                    <div class="media-left">
                        <img src="~/Ico/icons8-документы-50.png" class="media-object" style="width:50px">
                    </div>
                    <div class="media-body">
                        <h3 class="media-heading">Администрирование</h3>
                        <p>Логи, отчеты, программы</p>
                    </div>
                </div>
                <p><a href="/Manage/RolesAndUsers" class="btn btn-success btn-lg" style="width:500Px"><i class="glyphicon glyphicon-user"></i> Пользователи &raquo;</a></p>
                <p><a href="/AvtoScans/Index" class="btn btn-success btn-lg" style="width:500Px"><i class="glyphicon glyphicon-eye-open"></i> АвтоСкан &raquo;</a></p>
                <p><a href="/Logs/Index" class="btn btn-success btn-lg" style="width:500Px"><i class="glyphicon glyphicon-align-right"></i> Логи &raquo;</a></p>
            }

        }

        <p><a href="http://gkhnsc.ru/" class="btn btn-success btn-lg" style="width:500Px"><i class="glyphicon glyphicon-new-window"></i>Web сайт &raquo;</a></p>

    }
    else
    {
        <h4 style="color:forestgreen;"><b>Вы не авторизованы на сайте. Пожалуйста: </b></h4>
        <p><a href="/Account/Login" class="btn btn-success btn-lg" style="width:500Px">Войдите в программу &raquo;</a></p>
    }

</Center>

@section Scripts
{
@Scripts.Render("~/scripts/jquery-3.3.1.min.js")
@Scripts.Render("~/scripts/jquery-ui-1.12.1.min.js")
@Scripts.Render("~/scripts/nprogress.min.js")
@Scripts.Render("~/scripts/jquery.signalR-2.4.0.min.js")
@Scripts.Render("~/signalr/hubs")
<script>
    $(function () {
        var PB = $.connection.progressHub;
        console.log("Loading...");
        PB.client.sendMessage = function (message, count) {
            // update progress
            console.log(count);
            UpdateProgress(message, count);
            //alert(message);
        };

        $.connection.hub.start().done(function () {
            console.log("Приконнектились");
            // call the method CallLongOperation defined in the Hub
            PB.server.getCountAndMessage();
            //$("#progressBar").hide();
          


        });


        // Update the progress bar
        function UpdateProgress(message, count) {
           // $("#progressBar").fadeIn("slow");
            var result = $("#result");
            if (count >= 100) { $("#X").click(); }
            result.html(message);

            //$("#progressBar").data("progressbar").value(count);

            $("#progressBar").attr("aria-valuenow", count);
            $("#progressBar").width(count + '%');
            $("#progressBar").text(count + '%');
            $("#nadpis").text(message);
            // $("#progressBar").css("width", count);
        }
    });
</script>

}
